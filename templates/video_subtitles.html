{% extends "base.html" %}

{% block content %}
<section>
    <h2>Video Subtitle Generator</h2>
    <form method="POST" action="{{ url_for('video_subtitles') }}" enctype="multipart/form-data">
        <label for="video_file">Upload a video file (mp4, avi):</label><br />
        <input type="file" id="video_file" name="video_file" accept=".mp4,.avi,.mov" required /><br /><br />
        <div id="video-preview-container" style="margin-bottom: 1rem;">
            <video id="video-preview" controls style="max-width: 100%; max-height: 300px; display: none; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"></video>
        </div>
        <button type="submit">Generate Subtitles</button>
    </form>

    {% if subtitle_file %}
    <h3>Generated Subtitles:</h3>
    <a href="{{ url_for('static', filename=subtitle_file) }}" download>Download Subtitles (TXT)</a>
    {% endif %}
</section>

<script>
document.getElementById('video_file').addEventListener('change', function(event) {
    const preview = document.getElementById('video-preview');
    const file = event.target.files[0];
    if (file) {
        preview.src = URL.createObjectURL(file);
        preview.style.display = 'block';
    } else {
        preview.src = '';
        preview.style.display = 'none';
    }
});
</script>
{% endblock %}
